<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Mode Test - Kurukshetra Mitra</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui; background: linear-gradient(135deg, #fdfbf7 0%, #e6d5c3 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 1rem; }
        .container { max-width: 500px; width: 100%; }
        .header { text-align: center; margin-bottom: 1.5rem; }
        .header h1 { font-size: 2rem; color: #8B4513; margin-bottom: 0.5rem; }
        
        /* Chat Container */
        .chat-container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(139,69,19,0.2); overflow: hidden; height: 600px; display: flex; flex-direction: column; }
        
        /* Chat Header */
        .chat-header { background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; }
        .chat-header-avatar { font-size: 2rem; }
        .chat-header-info h2 { font-size: 1.2rem; margin-bottom: 0.2rem; }
        .chat-header-status { font-size: 0.85rem; opacity: 0.9; }
        
        /* Messages Area */
        .chat-messages { flex: 1; overflow-y: auto; padding: 1.5rem; background: #f8f9fa; }
        
        /* Message */
        .chat-message { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .chat-message-bot { justify-content: flex-start; }
        .chat-message-user { justify-content: flex-end; }
        
        /* Avatar */
        .chat-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; flex-shrink: 0; }
        .chat-message-user .chat-avatar { background: linear-gradient(135deg, #d4af37 0%, #b8960f 100%); }
        
        /* Content */
        .chat-content { max-width: 70%; display: flex; flex-direction: column; gap: 0.5rem; }
        
        /* Bubble */
        .chat-bubble { padding: 1rem 1.25rem; border-radius: 15px; line-height: 1.6; word-wrap: break-word; }
        .chat-message-bot .chat-bubble { background: white; border-bottom-left-radius: 5px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .chat-message-user .chat-bubble { background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; border-bottom-right-radius: 5px; }
        
        /* Timestamp */
        .chat-timestamp { font-size: 0.75rem; color: #999; }
        .chat-message-user .chat-timestamp { text-align: right; }
        
        /* Quick Replies */
        .chat-quick-replies { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
        .chat-quick-reply { background: white; border: 2px solid #8B4513; color: #8B4513; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .chat-quick-reply:hover { background: #8B4513; color: white; transform: translateY(-1px); }
        
        /* Actions */
        .chat-actions { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem; }
        .chat-action { background: linear-gradient(135deg, #d4af37 0%, #b8960f 100%); color: white; padding: 0.75rem 1rem; border-radius: 10px; border: none; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.2s; text-align: left; }
        .chat-action:hover { transform: translateX(5px); }
        
        /* Typing Indicator */
        .chat-typing-indicator { display: flex; gap: 0.75rem; margin-bottom: 1.5rem; animation: slideIn 0.3s ease; }
        .chat-typing-dots { background: white; padding: 1rem 1.25rem; border-radius: 15px; border-bottom-left-radius: 5px; display: flex; gap: 0.3rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .chat-typing-dots span { width: 8px; height: 8px; border-radius: 50%; background: #8B4513; animation: bounce 1.4s infinite; }
        .chat-typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .chat-typing-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-10px); } }
        
        /* Input Area */
        .chat-input-area { padding: 1.5rem; background: white; border-top: 2px solid #e6d5c3; display: flex; gap: 1rem; }
        .chat-input { flex: 1; padding: 1rem; border: 2px solid #e6d5c3; border-radius: 25px; font-size: 1rem; font-family: inherit; resize: none; }
        .chat-input:focus { outline: none; border-color: #8B4513; }
        .chat-send { width: 50px; height: 50px; border-radius: 50%; border: none; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; font-size: 1.2rem; cursor: pointer; transition: transform 0.2s; }
        .chat-send:hover { transform: scale(1.1); }
        
        /* Controls */
        .controls { margin-top: 1rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
        .control-btn { padding: 0.75rem; background: white; border: 2px solid #8B4513; color: #8B4513; border-radius: 10px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .control-btn:hover { background: #8B4513; color: white; }
        
        /* Stats */
        .stats { margin-top: 1rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
        .stat-card { background: white; padding: 1rem; border-radius: 10px; text-align: center; box-shadow: 0 4px 12px rgba(139,69,19,0.1); }
        .stat-number { font-size: 1.5rem; font-weight: bold; color: #8B4513; display: block; margin-bottom: 0.25rem; }
        .stat-label { font-size: 0.8rem; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ’¬ Chat Mode Test</h1>
            <p style="color: #666;">Conversational UI Demo</p>
        </div>
        
        <div class="chat-container" id="chat-container">
            <div class="chat-header">
                <div class="chat-header-avatar">ğŸ•‰ï¸</div>
                <div class="chat-header-info">
                    <h2>Kurukshetra Mitra</h2>
                    <div class="chat-header-status">Online â€¢ Ready to help</div>
                </div>
            </div>
            
            <div class="chat-messages"></div>
            
            <div class="chat-input-area">
                <input type="text" class="chat-input" placeholder="Type your message..." autocomplete="off">
                <button class="chat-send"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        
        <div class="controls">
            <button class="control-btn" onclick="chat.showHelp()"><i class="fas fa-question-circle"></i> Help</button>
            <button class="control-btn" onclick="chat.showAllSites()"><i class="fas fa-map-marked"></i> Sites</button>
            <button class="control-btn" onclick="chat.clearChat()"><i class="fas fa-trash"></i> Clear</button>
        </div>
        
        <div class="stats" id="stats"></div>
    </div>
    
    <script src="js/tour-guide-data.js"></script>
    <script src="js/questions-data.js"></script>
    <script src="js/chat-mode.js"></script>
    <script>
        console.log('ğŸ‰ Chat Mode Test Page Loading...');
        
        // Initialize data modules
        const sites = TourGuideData.init();
        const questions = QuestionsData.init();
        
        // Initialize chat
        const chat = ChatMode.init({
            container: document.getElementById('chat-container'),
            tourGuideData: sites,
            questionsData: questions,
            onMessage: (message) => {
                updateStats();
            },
            onAction: (action) => {
                console.log('Action:', action);
                
                // Handle custom actions
                if (action.action === 'view_site') {
                    chat.sendBotMessage(
                        `Great choice! **${action.data.name}** is ${action.data.description}`,
                        { delay: 500 }
                    );
                }
            }
        });
        
        function updateStats() {
            const history = chat.getHistory();
            const userMessages = history.filter(m => m.sender === 'user').length;
            const botMessages = history.filter(m => m.sender === 'bot').length;
            
            document.getElementById('stats').innerHTML = `
                <div class="stat-card">
                    <span class="stat-number">${history.length}</span>
                    <div class="stat-label">Total Messages</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${userMessages}</span>
                    <div class="stat-label">User Messages</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">${botMessages}</span>
                    <div class="stat-label">Bot Messages</div>
                </div>
            `;
        }
        
        // Test commands
        function sendTest(text) {
            chat.processUserInput(text);
        }
        
        // Update stats initially
        setTimeout(updateStats, 1000);
        
        console.log('âœ… Chat Mode ready!');
        console.log('');
        console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
        console.log('ğŸ’¬ CHAT MODE LOADED!');
        console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
        console.log('');
        console.log('ğŸ’¡ Try these commands:');
        console.log('   â€¢ "Hello" - Welcome message');
        console.log('   â€¢ "Help" - Show help');
        console.log('   â€¢ "Show sites" - List all sites');
        console.log('   â€¢ "Brahma Sarovar" - Search for site');
        console.log('   â€¢ "Why is Kurukshetra important?" - Ask question');
        console.log('   â€¢ "Weather" - Request weather');
        console.log('   â€¢ "Events" - View events');
        console.log('');
        console.log('ğŸ® Functions available:');
        console.log('   chat.showHelp()');
        console.log('   chat.showAllSites()');
        console.log('   chat.clearChat()');
        console.log('   sendTest("your message")');
        console.log('');
    </script>
</body>
</html>
